# 培训总结笔记

## 容器化构建(Docker)

### Docker
- 属于操作系统层面的虚拟化技术
- 对进程进行封装隔离——容器
- 极大简化容器的创建和维护
- 与虚拟机相比，不需要创建Guest OS
- 在线使用方式：https://wecode.huawei.com/WeCodeOnline

### 容器特性
- 安全性
- 隔离性：靠namespace实现
- 可配额：靠Cgroups实现，有可压榨资源(如CPU)和不可压榨资源(如内存)的概念
- - -

## C语言基础

### 变量
- 32位：char(1)、short(2)、int(4)、long(4)、float(4)、double(8)
- float和double是浮点数，由底数、指数和符号位组成，无法表示全部的同长度int数值

### const与指针
- 当const在"*"前面，则其修饰的是指针指向的内容，即该地址存的内容的值不可改变
- 当const在"*"后面，则其修饰的是指针本身，即该地址不可改变
- 当const在"*"前后都有时，二者均不可改变
- 示例：const int *p1; int *const p2 = 1个地址; const int *const p3 = 1个地址;

### 数组与指针
- 数组与指针不可互换的场景：sizeof()
- 数组与指针可互换的场景：函数参数(都当成指针)、表达式([]与++)

### 操作符匹配
- 编译器总是尽量多地去匹配操作符
- "++"只能对左值操作，而不能是立即数
- 示例：int m = ++3;  //编译报错

### 类型转换
- 当操作符的两边类型不匹配时需要进行类型转换
- 类型转换总是向长度增长的方向转换
- sizeof()的返回值是无符号数

### C与C++的区别
- C不支持函数重载

### 宏与内联函数的区别
- 宏在预编译阶段，内联函数在编译阶段
- 宏不进行类型检查

### 函数指针
- 示例：int (*func)();
- - -

## 开发者测试

### 测试应与接口耦合，而不是实现

### 金字塔结构
- 单元测试(70%)：组件/模块内的测试，能看到代码实现
- 集成测试(20%)：把多个组件集合起来进行测试
- 系统测试(10%)：命令行/端到端测试
- 金字塔结构的目的：降低成本，加快速度

### 测试替身
- 桩(Stub)：返回固定值
- 伪对象(Fake)：轻量级实现
- 仿对象(Mock)：基于行为的验证
- 间谍(Spy)：特殊的桩，记录信息
- 哑对象(Dummy)：用于填充参数列表

### 黑盒测试方法
- 等价类划分：分出有效等价类和无效等价类
- 边界值分析

### 3种测试工具
- HDT：https://open.codehub.huawei.com/groups/hdt/detail
- DTEST
- 蝴蝶(老，不推荐)
- - -

## 编程规范

### 命名
- 符合英文阅读习惯
- 作用域越大，命名越精确
- 驼峰风格、内核风格、匈牙利风格(不推荐)
- 函数：大驼峰；局部变量：小驼峰；全局变量：g_小驼峰；宏、常量：全大写

### 注释
- 按需注释
- 注释符与注释内容间要有1空格
- 注释放在代码上面/右面
- - -

## 数据结构与算法

### 排序
- 稳定排序：相等值在排序前后相对位置不变
- 库函数一般内置为快速排序
- 快速排序基准值选择：固定、随机、三数取中
- 题目：课程表、每日温度

### 查找
- 题目：爱吃香蕉的珂珂

### 动态规划
- 题目：最长整除数组、卖木头块

### 面试
- 考察点：关键技术、技术热情、学习动力、总结能力
- 三要：技能提前复习、充分理解问题、主动传达自己的长处
- 三不要：不要冷场、不要说谎、不要轻易放弃

### 工作中的算法问题
- 判断无向图是否全连通：DFS、BFS、并查集
- 无向图求割点：Tanjan算法

### 网络领域的项目
- 应用层：代理、软路由、ftp服务器等
- 应用层之下：Socket、串口、IGP实现、Wireshark抓包等
- 兴趣最重要
- - -

## TCP/IP、IGP和BGP

## 概念
- TCP/IP是传输控制协议、网际协议
- TCP/IP是一个协议簇
- 不同于OSI的七层模型，TCP/IP使用更为简单的五层模型
  - 物理层：二进制数据流传输
  - 数据链路层：物理介质访问，Ethernet等
  - 网络层：寻址和路由选择，IP、ARP/RARP、ICMP、IGMP、RIP、OSPF、BGP等
  - 传输层：建立端到端连接，TCP和UDP
  - 应用层：提供应用程序网络接口，HTTP、Telnet、FTP、SMTP等

## 协议
- IP：提供全球统一的编址方式和报文格式，屏蔽链路层差异，使路由查找和网络互连成为可能
- ARP：地址解析协议，IP地址->MAC地址
- ICMP：传递差错报文
- NAT：内部地址与外部地址的转换
- TCP：面向连接、可靠传输、三次握手建立连接、四次挥手释放连接
- UDP：无连接、尽力而为

### 二层转发
- 在局域网内进行二层转发时，发端可以将数据包目的MAC地址直接设为收端MAC地址
- 转发时只解析二层头，并且不修改目的MAC地址

### MPLS
- 给数据包打标签
- 报头位于以太网头和IP头之间
- 起源：为了将IP与ATM相结合

### IGP
- RIP：距离矢量
- OSPF、IS-IS：链路状态

### BGP
- 路径矢量协议，是距离矢量协议的一种形式
- 基于TCP
- 携带属性信息

### BGP引入的必要
- 网络规模庞大
- 设备可能不关心全网的拓扑变化
- 不同运营商、公司可以自己申请AS，而AS之间需要协议进行管理

### BGP应用场景
- 园区网
- 城域网(Metro)
- 骨干网(Backbone)
- 数据中心(DC)
- IGW：关口局，用于在运营商边界连接Internet，纯公网
- IXP：用于关口局的互联
- SD-WAN：软件定义广域网，用于分支互联，要有隧道和加密技术
- (分层概念：Control&Collect、Overlay和Underlay)
- - -

## 软件工程

### 团队组织结构
- 版本支撑
- 软件工程
- 研发工具
- 白盒验证

### 能力模型
- 版本编译：版本管理(git/svn)、工程方法(make、cmake、shell等)
- 工程工具：自动化、云/容器化、日志智能分析
- 可信认证：编译原理等
- 开源社区
- 版本交付
- - -

## 转发管理业务

### 转发管理
- 分为3个团队：
- FWM组播
- FEI单播
- FWM单播

### 架构设计
- 4+1：
- 用例试图
- 逻辑试图
- 实现试图
- 部署试图
- 运行试图

### RPC
- 远程过程调用(Remote Procedure Call)
- 第三方客户程序通过接口调用SAP内部标准/函数

### 解决时序问题：
- 上锁
- 原子操作(信号量)

### 解决消息队列满问题
- 加buffer(让消费者快)
- 流控反压(反压生产者，让生产者慢)

### 消息中间件
- 队列、消息传递
- 意义：异步提升性(低时延)、系统间解耦(组件化)、负载分担(高吞吐量)

### 高性能共享内存
- Ring Buffer
- 序列号
- - -

## SR业务

### SR产生背景
- 解决MPLS LDP困境：LDP基于IGP做最短路径转发，无法实现流量工程
- 解决RSVP TE困境：具备路径规划、资源预留能力，但配置和维护太过复杂，不具备可扩展性
- 解决传统SDN困境：数控完全分离，单靠控制器的话可靠性差且流表巨大

### SR概念
- 分段路由(Segment Routing)
- 源路由，基于标签栈进行转发
- 把网络分成不同的段然后拼接起来，用于指导报文按指定路径走
- 可以分为节点标签和链路标签

### 松散路径
- 把显式路径(链路标签)与最短路径(节点标签)相结合

### SRv6的优势
- 与SR-MPLS不同，SRv6基于IPv6，而IPv6头中有next header字段来指示携带的下一报头类型
- 对于不支持下一报头类型(如SRv6)的设备，可以直接将下一报头略过进而处理之后的载荷
- - -

## V8软件基础

### 无配置不框架
- 减少数据变更对业务代码的影响

### 高可靠性(HA)
- 现在普遍要求核心路由器达到99.999%的高可用性，全年停机不超过5分钟
- 高可靠性架构(HAF)：使用该架构管理SSP系统，提供了组件管理、备份、订阅等功能
- HAF最小单元：so文件+cfg文件， 其中cfg文件包含构造、析构和消息处理函数
- HAF运行机制及功能：Process、组件启动及主备仲裁，组件备份(实时备份和批量备份)，主备倒换，故障

### SEM
- 负责动态库的加载、卸载等

### 组件
- CID是组件的唯一标识，PID是服务的唯一标识
- 主备之间CID不一样，PID一样

### 配置管理平面
- 配置接口：CLI、WebUI、NETCONF、SNMP等
- 信息模型：DOM、DIM和DAM
- 数据库：APPDB、CDB、RDB和TDB
- (配置管理的基础：事务)

### 命令行开发步骤
- 命令解析：CLI组件根据命令行静态模型生成对象报文
- 配置编辑(CMF框架)：脚本调用+类关联关系检查+语法检查，输出下发到CDB(候选数据库)--(commit)-->RDB(运行数据库)

### 用户视图--(system-view)-->系统视图

### NETCONF
- NETCONF协议采用分层框架：
- 内容(配置、状态、通知数据)
- 操作(<get>等)
- 消息(<rpc>等>)
- 传输(SSH over TCP)

### YANG
- YANG文件+数据->XML
- YANG文件类似于模板，填上数据就可以生成一致的XML
- - -
